"use strict";(self.webpackChunkubold_react=self.webpackChunkubold_react||[]).push([[1923],{38359:function(e,n,s){var t=s(1413),r=(s(72791),s(9140)),i=s(89743),l=s(2677),d=s(81694),a=s.n(d),c=s(40835),o=s(80184);n.Z=function(e){return(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(r.Z,{className:"widget-rounded-circle",children:(0,o.jsx)(r.Z.Body,{children:(0,o.jsxs)(i.Z,{children:[(0,o.jsx)(l.Z,{className:"col-6",children:(0,o.jsx)("div",{className:a()("avatar-lg","rounded-circle","bg-soft-"+e.variant,"border-"+e.variant,"border"),children:(0,o.jsx)("i",{className:a()(e.icon,"avatar-title","font-22","text-"+e.variant)})})}),(0,o.jsx)(l.Z,{className:"col-6",children:(0,o.jsxs)("div",{className:"text-end",children:[(0,o.jsx)("h3",{className:"text-dark mt-1",children:(0,o.jsx)("span",{children:(0,o.jsx)(c.ZP,(0,t.Z)({duration:1,end:e.stats},e.counterOptions))})}),(0,o.jsx)("p",{className:"text-muted mb-1 text-truncate",children:e.description})]})})]})})})})}},11923:function(e,n,s){s.r(n),s.d(n,{default:function(){return S}});var t=s(29439),r=s(72791),i=s(89743),l=s(2677),d=s(42090),a=s(38359),c=s(80184),o=function(e){var n,s,t,r=e.leads;return(0,c.jsx)(c.Fragment,{children:(0,c.jsxs)(i.Z,{children:[(0,c.jsx)(l.Z,{md:6,xl:3,children:(0,c.jsx)(a.Z,{variant:"primary",description:"Total Leads",stats:(null===r||void 0===r?void 0:r.length)||0,icon:"fe-heart"})}),(0,c.jsx)(l.Z,{md:6,xl:3,children:(0,c.jsx)(a.Z,{variant:"success",description:"Ongoing Leads",stats:(null===r||void 0===r||null===(n=r.filter((function(e){return"Ongoing"===e.leadStatus})))||void 0===n?void 0:n.length)||0,icon:"fe-shopping-cart"})}),(0,c.jsx)(l.Z,{md:6,xl:3,children:(0,c.jsx)(a.Z,{variant:"info",description:"Closed Leads",stats:(null===r||void 0===r||null===(s=r.filter((function(e){return"Closed"===e.leadStatus})))||void 0===s?void 0:s.length)||0,icon:"fe-bar-chart-line-"})}),(0,c.jsx)(l.Z,{md:6,xl:3,children:(0,c.jsx)(a.Z,{variant:"warning",description:"Rejected Leads",stats:(null===r||void 0===r||null===(t=r.filter((function(e){return"Rejected"===e.leadStatus})))||void 0===t?void 0:t.length)||0,icon:"fe-eye"})})]})})},h=s(1413),u=s(9140),x=s(38459),j=s(57948),v=function(e){var n,s,t;return(0,c.jsx)(x.y,{placeholder:"Select Assignee",onChange:function(n){var s,t;e.onAssigneeChange((0,h.Z)((0,h.Z)({},null===e||void 0===e||null===(s=e.row)||void 0===s?void 0:s.original),{},{assignee:null===n||void 0===n||null===(t=n.target)||void 0===t?void 0:t.value}))},type:"select",value:null===(n=e.row)||void 0===n||null===(s=n.original)||void 0===s?void 0:s.assignee,name:"assignee",width:180,children:null===(t=e.options)||void 0===t?void 0:t.map((function(e){return(0,c.jsx)("option",{value:e,children:e})}))})},m=function(e){var n=e.openLeads,s=e.loadCustomerLeads,i=(0,r.useState)([]),l=(0,t.Z)(i,2),a=l[0],o=l[1];(0,r.useEffect)((function(){(0,j.N)().then((function(e){return o(["Unassigned"].concat(null===e||void 0===e?void 0:e.map((function(e){return null===e||void 0===e?void 0:e.username}))))}))}),[]);var x=function(e){(0,d.wS)(null===e||void 0===e?void 0:e.id,e).then((function(){s()}))},m=sessionStorage.getItem("ubold_user")||"",g=JSON.parse(m);return(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(u.Z,{children:(0,c.jsxs)(u.Z.Body,{children:[(0,c.jsx)("h4",{className:"header-title mb-3",children:"Ongoing Customer Leads"}),(0,c.jsx)("div",{className:"table-responsive",children:(0,c.jsxs)("table",{className:"table table-borderless table-hover table-nowrap table-centered m-0",children:[(0,c.jsx)("thead",{children:(0,c.jsxs)("tr",{children:[(0,c.jsx)("th",{children:"Name"}),(0,c.jsx)("th",{children:"Email"}),(0,c.jsx)("th",{children:"Phone"}),(0,c.jsx)("th",{children:"Company"}),(0,c.jsx)("th",{children:"Category"}),(0,c.jsx)("th",{children:"Source"}),"Admin"===(null===g||void 0===g?void 0:g.role)&&(0,c.jsx)("th",{style:{width:100},children:"Assignee"}),(0,c.jsx)("th",{children:"Created Date"}),(0,c.jsx)("th",{children:"Lead Status"})]})}),(0,c.jsx)("tbody",{children:n.map((function(e){var n,s;return(0,c.jsxs)("tr",{children:[(0,c.jsx)("td",{children:e.name}),(0,c.jsx)("td",{children:e.email}),(0,c.jsx)("td",{children:e.phone}),(0,c.jsx)("td",{children:e.company}),(0,c.jsx)("td",{children:e.category}),(0,c.jsx)("td",{children:e.source}),"Admin"===(null===g||void 0===g?void 0:g.role)&&(0,c.jsx)("td",{children:(0,c.jsx)(v,{row:{original:(0,h.Z)((0,h.Z)({},e),{},{assignee:null===e||void 0===e?void 0:e.assignee})},options:a,onAssigneeChange:x})}),(0,c.jsx)("td",{children:null===(n=e.createdDate)||void 0===n||null===(s=n.split("T"))||void 0===s?void 0:s[0]}),(0,c.jsx)("td",{children:e.leadStatus})]},e.id)}))})]})})]})})})},g=s(15861),f=s(64687),p=s.n(f),b=s(9478),Z=function(){var e=(0,r.useState)([]),n=(0,t.Z)(e,2),s=n[0],i=n[1],l=sessionStorage.getItem("ubold_user"),d=JSON.parse(l);return(0,r.useEffect)((function(){var e=function(){var e=(0,g.Z)(p().mark((function e(){var n,s;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(b.Z.API_URL,"/events/upcoming/all"));case 3:return n=e.sent,e.next=6,n.json();case 6:s=e.sent,i(null===s||void 0===s?void 0:s.filter((function(e){return e.username===(null===d||void 0===d?void 0:d.username)}))),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error("Error fetching upcoming events:",e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();e()}),[]),(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(u.Z,{children:(0,c.jsxs)(u.Z.Body,{children:[(0,c.jsx)("h4",{className:"header-title mb-3",children:"Upcoming Events"}),(0,c.jsx)("div",{className:"table-responsive",children:(0,c.jsxs)("table",{className:"table table-borderless table-hover table-nowrap table-centered m-0",children:[(0,c.jsx)("thead",{children:(0,c.jsxs)("tr",{children:[(0,c.jsx)("th",{children:"Title"}),(0,c.jsx)("th",{children:"Start"}),(0,c.jsx)("th",{children:"End"})]})}),(0,c.jsx)("tbody",{children:s.map((function(e){return(0,c.jsxs)("tr",{children:[(0,c.jsx)("td",{children:e.title}),(0,c.jsx)("td",{children:new Date(e.start).toLocaleString()}),(0,c.jsx)("td",{children:e.end?new Date(e.end).toLocaleString():"N/A"})]},e.id)}))})]})})]})})})},N=function(e){var n=e.leads,s=function(){var e={};return n.forEach((function(n){var s=n.assignee,t=n.leadStatus;switch(e[s]||(e[s]={onGoingLeads:0,closedLeads:0,rejectedLeads:0}),t){case"Open":case"Ongoing":e[s].onGoingLeads++;break;case"Closed":e[s].closedLeads++;break;case"Rejected":e[s].rejectedLeads++}})),e}();return(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(u.Z,{children:(0,c.jsxs)(u.Z.Body,{children:[(0,c.jsx)("h4",{className:"header-title mb-3",children:"Assignee Metrics"}),(0,c.jsx)("div",{className:"table-responsive",children:(0,c.jsxs)("table",{className:"table table-borderless table-hover table-nowrap table-centered m-0",children:[(0,c.jsx)("thead",{children:(0,c.jsxs)("tr",{children:[(0,c.jsx)("th",{children:"Assignee"}),(0,c.jsx)("th",{children:"On Going"}),(0,c.jsx)("th",{children:"Closed"}),(0,c.jsx)("th",{children:"Rejected"})]})}),(0,c.jsx)("tbody",{children:Object.keys(s).map((function(e){return(0,c.jsxs)("tr",{children:[(0,c.jsx)("td",{children:e}),(0,c.jsx)("td",{children:s[e].onGoingLeads}),(0,c.jsx)("td",{children:s[e].closedLeads}),(0,c.jsx)("td",{children:s[e].rejectedLeads})]},e)}))})]})})]})})})},S=function(){var e=(0,r.useState)(new Date),n=(0,t.Z)(e,2),s=(n[0],n[1],(0,r.useState)([])),a=(0,t.Z)(s,2),h=a[0],u=a[1],x=function(){return d.XM().then(u)};(0,r.useEffect)((function(){x()}),[]);var j=sessionStorage.getItem("ubold_user")||"",v=JSON.parse(j),g="Admin"===(null===v||void 0===v?void 0:v.role)?h:null===h||void 0===h?void 0:h.filter((function(e){return e.assignee===(null===v||void 0===v?void 0:v.username)}));return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(i.Z,{children:(0,c.jsx)(l.Z,{children:(0,c.jsx)("div",{className:"page-title-box",children:(0,c.jsxs)("h4",{className:"page-title",children:["Dashboard ","Admin"===(null===v||void 0===v?void 0:v.role)&&" Admin"]})})})}),(0,c.jsx)(o,{leads:g}),(0,c.jsxs)(i.Z,{children:[(0,c.jsx)(l.Z,{xl:6,children:"Admin"===(null===v||void 0===v?void 0:v.role)?(0,c.jsx)(N,{leads:h}):(0,c.jsx)(Z,{})}),(0,c.jsx)(l.Z,{xl:6,children:(0,c.jsx)(m,{openLeads:g.filter((function(e){return"Ongoing"===e.leadStatus}))||[],loadCustomerLeads:x})})]})]})}}}]);
//# sourceMappingURL=1923.6310e943.chunk.js.map
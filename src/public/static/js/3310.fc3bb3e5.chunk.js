"use strict";(self.webpackChunkubold_react=self.webpackChunkubold_react||[]).push([[3310],{63310:function(e,t,n){n.r(t),n.d(t,{default:function(){return I}});var a=n(1413),s=n(29439),r=n(72791),i=n(11087),l=n(89743),c=n(2677),o=n(9140),u=n(43360),d=n(81694),m=n.n(d),h=n(75184),p=n(9189),f=n(84158),v=n(81724),x=n(61265),b=n(38459),j=n(80184),Z=function(e){var t=e.isView,n=e.data,a=e.show,s=e.onHide,r=e.onSubmit,i=(0,x.X)(v.Ry().shape({name:v.Z_().required("Please enter name"),email:v.Z_().required("Please enter email").email("Please enter valid email"),phone:v.Z_().required("Please enter phone").matches(/^\d{10}$/,"Phone number is not valid"),location:v.Z_().required("Please enter location"),statusItem:v.Z_().required("Please select status")})),l=t?"View":"Edit",c=null!==n&&void 0!==n&&n.id?l:"Add";return(0,j.jsx)(j.Fragment,{children:(0,j.jsxs)(f.Z,{show:a,onHide:s,"aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[(0,j.jsx)(f.Z.Header,{className:"bg-light",onHide:s,closeButton:!0,children:(0,j.jsxs)(f.Z.Title,{className:"m-0",children:[c," Customers"]})}),(0,j.jsx)(f.Z.Body,{className:"p-4",children:(0,j.jsxs)(b.J,{onSubmit:r,resolver:i,children:[(0,j.jsx)(b.y,{label:"Full Name",type:"text",name:"name",placeholder:"Enter full name",disabled:t,defaultValue:null===n||void 0===n?void 0:n.name,containerClass:"mb-3"}),(0,j.jsx)(b.y,{label:"Email address",type:"email",name:"email",disabled:t,defaultValue:null===n||void 0===n?void 0:n.email,placeholder:"Enter email",containerClass:"mb-3"}),(0,j.jsx)(b.y,{label:"Phone",type:"text",name:"phone",disabled:t,defaultValue:null===n||void 0===n?void 0:n.phone,placeholder:"Enter phone number",containerClass:"mb-3"}),(0,j.jsx)(b.y,{label:"Location",type:"text",name:"location",disabled:t,defaultValue:null===n||void 0===n?void 0:n.location,placeholder:"Enter location",containerClass:"mb-3"}),(0,j.jsxs)(b.y,{label:"Status",type:"select",name:"statusItem",disabled:t,defaultValue:null===n||void 0===n?void 0:n.status,placeholder:"Enter Status",containerClass:"mb-3",children:[(0,j.jsx)("option",{value:"Active",children:"Active"}),(0,j.jsx)("option",{value:"Blocked",children:"Blocked"})]}),(0,j.jsxs)("div",{className:"text-end",children:[(0,j.jsx)(u.Z,{variant:"success",type:"submit",className:"waves-effect waves-light me-1",disabled:t,children:"Save"}),(0,j.jsx)(u.Z,{variant:"danger",className:"waves-effect waves-light",onClick:s,children:"Continue"})]})]})})]})})},g=n(15861),w=n(64687),C=n.n(w),N=n(9478),y="".concat(N.Z.API_URL,"/customer"),k=function(){var e=(0,g.Z)(C().mark((function e(t){var n,a,s,r,i,l,c=arguments;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.length>1&&void 0!==c[1]?c[1]:"GET",a=c.length>2&&void 0!==c[2]?c[2]:null,s="".concat(y).concat(t),r={method:n,headers:{"Content-Type":"application/json"}},a&&(r.body=JSON.stringify(a)),e.prev=5,e.next=8,fetch(s,r);case 8:return i=e.sent,e.next=11,i.json();case 11:return l=e.sent,e.abrupt("return",l);case 15:throw e.prev=15,e.t0=e.catch(5),console.error("API Error:",e.t0.message),new Error("Failed to fetch data from the server");case 19:case"end":return e.stop()}}),e,null,[[5,15]])})));return function(t){return e.apply(this,arguments)}}(),E=function(){var e=(0,g.Z)(C().mark((function e(){return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",k("/"));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=(0,g.Z)(C().mark((function e(t){return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.status=t.statusItem,e.abrupt("return",k("/","POST",t));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),H=function(){var e=(0,g.Z)(C().mark((function e(t,n){return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.status=n.statusItem,e.abrupt("return",k("/".concat(t),"PATCH",n));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),P=function(){var e=(0,g.Z)(C().mark((function e(t){return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",k("/".concat(t),"DELETE"));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),V=function(e){var t=e.row;return(0,j.jsxs)("div",{className:"table-user",children:[(0,j.jsx)("img",{src:t.original.avatar,alt:"",className:"me-2 rounded-circle"}),(0,j.jsx)(i.rU,{to:"#",className:"text-body fw-semibold",children:t.original.name})]})},A=function(e){var t=e.row;return(0,j.jsx)(r.Fragment,{children:(0,j.jsx)("span",{className:m()("badge",{"bg-soft-success text-success":"Active"===t.original.status,"bg-soft-danger text-danger":"Blocked"===t.original.status}),children:t.original.status})})},_=function(e){var t=e.row,n=e.onViewClick,a=e.onEditClick,s=e.onDeleteClick;return(0,j.jsxs)(r.Fragment,{children:[(0,j.jsxs)(i.rU,{to:"#",className:"action-icon",onClick:function(){return n(null===t||void 0===t?void 0:t.original)},children:[" ",(0,j.jsx)("i",{className:"mdi mdi-eye"})]}),(0,j.jsxs)(i.rU,{to:"#",className:"action-icon",onClick:function(){return a(null===t||void 0===t?void 0:t.original)},children:[" ",(0,j.jsx)("i",{className:"mdi mdi-square-edit-outline"})]}),(0,j.jsxs)(i.rU,{to:"#",className:"action-icon",onClick:function(){return s(null===t||void 0===t?void 0:t.original)},children:[" ",(0,j.jsx)("i",{className:"mdi mdi-delete"})]})]})},I=function(){var e=(0,r.useState)(!1),t=(0,s.Z)(e,2),n=t[0],i=t[1],d=function(){C(!1),i(!1),I({})},m=(0,r.useState)([]),f=(0,s.Z)(m,2),v=f[0],x=f[1],b=(0,r.useState)(!1),g=(0,s.Z)(b,2),w=g[0],C=g[1],N=(0,r.useState)({}),y=(0,s.Z)(N,2),k=y[0],I=y[1],q=function(){return E().then((function(e){return x(e)}))};(0,r.useEffect)((function(){q()}),[]);var B=function(e){i(!0),I(e),C(!0)},F=function(e){i(!0),I(e),C(!1)},T=function(e){P(null===e||void 0===e?void 0:e.id).then((function(){return q()}))},U=[{Header:"Customer",accessor:"name",sort:!0,Cell:V,classes:"table-user"},{Header:"Phone",accessor:"phone",sort:!1},{Header:"Email",accessor:"email",sort:!1},{Header:"Location",accessor:"location",sort:!1},{Header:"Create Date",accessor:"created_on",sort:!1},{Header:"Status",accessor:"status",sort:!1,Cell:A},{Header:"Action",accessor:"action",sort:!1,classes:"table-action",Cell:function(e){return(0,j.jsx)(_,(0,a.Z)((0,a.Z)({},e),{},{onViewClick:B,onEditClick:F,onDeleteClick:T}))}}];return(0,j.jsxs)(r.Fragment,{children:[(0,j.jsx)(h.Z,{breadCrumbItems:[{label:"CRM",path:"/apps/crm/customers"},{label:"Customers",path:"/apps/crm/customers",active:!0}],title:"Customers"}),(0,j.jsx)(l.Z,{children:(0,j.jsx)(c.Z,{children:(0,j.jsx)(o.Z,{children:(0,j.jsxs)(o.Z.Body,{children:[(0,j.jsxs)(l.Z,{className:"mb-2",children:[(0,j.jsx)(c.Z,{sm:4,children:(0,j.jsxs)(u.Z,{variant:"danger",className:"waves-effect waves-light",onClick:function(){return i(!0)},children:[(0,j.jsx)("i",{className:"mdi mdi-plus-circle me-1"})," Add Customers"]})}),(0,j.jsx)(c.Z,{sm:8,children:(0,j.jsxs)("div",{className:"text-sm-end mt-2 mt-sm-0",children:[(0,j.jsx)(u.Z,{className:"btn btn-success mb-2 me-1",children:(0,j.jsx)("i",{className:"mdi mdi-cog"})}),(0,j.jsx)(u.Z,{className:"btn btn-light mb-2 me-1",children:"Import"}),(0,j.jsx)(u.Z,{className:"btn btn-light mb-2",children:"Export"})]})})]}),(0,j.jsx)(p.Z,{columns:U,data:v,pageSize:12,isSortable:!0,pagination:!0,isSelectable:!0,tableClass:"table-nowrap table-striped"})]})})})}),(0,j.jsx)(Z,{data:k,isView:w,show:n,onHide:d,onSubmit:function(e){null!==k&&void 0!==k&&k.id?H(null===k||void 0===k?void 0:k.id,e).then((function(){d(),I({}),C(!1),q()})):S(e).then((function(){d(),I({}),C(!1),q()}))}})]})}}}]);
//# sourceMappingURL=3310.fc3bb3e5.chunk.js.map